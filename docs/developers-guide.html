<!doctype html>
<html lang="en" class=" docs">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content>
<meta name="generator" content="SonicJs">
<meta name="version" content="0.7.6">
<link rel="icon" href="../assets/img/favicon.ico">
<title>Developers Guide | Kevant Technologies</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
<link rel="icon" href="../assets/img/favicon.ico">
<style>
        body,
        p,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: Lato,
            serif;
        }

        h1 {
            font-family: Roboto,
            serif;
        }
    </style>
<link href="../assets/css/combined-0.7.6.css" rel="stylesheet">
<script type="b9be5b5bd56675c7cf7d23c4-text/javascript">
          window.smartlook||(function(d) {
            var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
            var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
            c.charset='utf-8';c.src='https://rec.smartlook.com/recorder.js';h.appendChild(c);
            })(document);
            smartlook('init', '27453f61154d21329a82640d24877fb96f5a8eec');
        </script>
</head>
<body>
<input type="hidden" id="page-id" name="page-id" value="78f32cd0-e676-4fe0-bec0-4f0cba538857">
<input type="hidden" id="sessionID" value="erSLkhm7bre7bCBRHB5hAYrfiQF1V3h6" />
<input type="hidden" id="theme" value="bootstrap5" />
<main>
<nav class="navbar navbar-dark bg-dark" aria-label="First navbar example">
<div class="container-fluid">
<a class="navbar-brand" href="../index.html">
<div style class="mr-md-auto">
<img src="https://sonicjscom.s3.us-west-1.amazonaws.com/sonicjs-logo.svg" alt width="120px" />
</div>
</a>
<a class="btn btn-outline-light github" href="https://github.com/lane711/sonicjs" target="_blank"><i class="bi bi-github me-2"></i> Github</a>
<a class="btn btn-outline-light demo" href="https://demo.sonicjs.com" target="_blank"><i class="bi bi-github me-2"></i> Demo</a>
<button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample01" aria-controls="navbarsExample01" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="navbar-collapse collapse text-end p-2" id="navbarsExample01">
<ul class="navbar-nav me-auto mb-2">
<li class="nav-item">
<a class="nav-link " aria-current="page" href="../index.html">Home</a>
</li>
<li class="nav-item">
<a class="nav-link " aria-current="page" href="../blog.html">Blog</a>
</li>
<li class="nav-item">
<a class="nav-link " aria-current="page" href="../docs.html">Docs</a>
</li>
<li class="nav-item">
<a class="nav-link " aria-current="page" href="../about.html">About</a>
</li>
<li class="nav-item">
<a class="nav-link " aria-current="page" href="../nodejs-cms-comparison.html">Compare</a>
</li>
<li class="nav-item">
<a class="nav-link " aria-current="page" href="../contact.html">Contact</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="jumbotron-fluid hero no-margin">
<div class="dark-fade">
<div class="container">
<div class="row">
<div class="col">
<h1></h1>
</div>
</div>
</div>
</div>
</section>
<style>
.pb .css-8ecc8c31b06e{undefined}

.pb .overlay-8ecc8c31b06e{undefined}
</style><section data-id="1f57085f-aa8a-4c7f-bb21-8ecc8c31b06e" data-title="Section 1" class="jumbotron-fluid css-8ecc8c31b06e undefined undefined undefined position-relative"><div class="section-overlay overlay-8ecc8c31b06e undefined"><div class="container"><div class="row"><div class="col-md-3"><div class="module-template" style data-id="1e35bab3-b4bf-4a13-90df-6106d99a034f" data-module="TITLE" data-content-type="title" data-template-region="false" data-template-page="true"><h3 class="text-left mb-5 mt-0">SonicJs Docs
<a class="anchor" id="sonicjs-docs"></a>
</>
</div><div class="module-template" style data-id="347a18dc-ff2e-414a-b145-67aba3b9b575" data-module="MENU-ACCORDION" data-content-type="menu-accordion" data-template-region="false" data-template-page="true">
<nav id="accordian-menu" class="accordian-menu">
<a href="../docs.html" class="bold small text-uppercase mt-3 mb-1 level-1">Overview</a>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="../docs.html#special-sauce"><span>Special Sauce</span></a>


</nav>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="../docs.html#getting-started"><span>Getting Started</span></a>

<a class="pl-0 nav-item nav-link level-3" href="../docs.html#prerequisites"><span>Prerequisites</span></a>
<a class="pl-0 nav-item nav-link level-3" href="../docs.html#database-support"><span>Database Support</span></a>
<a class="pl-0 nav-item nav-link level-3" href="../docs.html#local-setup"><span>Local Setup</span></a>
<a class="pl-0 nav-item nav-link level-3" href="../docs.html#debugging"><span>Debugging</span></a>

</nav>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="features.html"><span>Features</span></a>


</nav>
<a href="demo-videos.html" class="bold small text-uppercase mt-3 mb-1 level-1">Demo Videos</a>
<a href="user-guide.html" class="bold small text-uppercase mt-3 mb-1 level-1">User Guide</a>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="user-guide.html#quick-start"><span>Quick Start</span></a>


</nav>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="user-guide/modules.html"><span>Modules</span></a>


</nav>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="user-guide/themes.html"><span>Themes</span></a>


</nav>
<a href="developers-guide.html" class="bold small text-uppercase mt-3 mb-1 level-1">Developer Guide</a>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="developers-guide.html#hooks"><span>Hooks</span></a>


</nav>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="developers-guide/modules.html"><span>Modules</span></a>

<a class="pl-0 nav-item nav-link level-3" href="developers-guide/modules/listing.html"><span>Listing</span></a>

</nav>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="developer-guide/database-connection.html"><span>Datbase</span></a>


</nav>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="developer-guide/data-model.html"><span>Data Model</span></a>


</nav>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="developer-guide/api-backend.html"><span>API - Backend</span></a>


</nav>
<nav class="nav flex-column font-sm">
<a class="pl-0 nav-item nav-link bold active level-2" href="developer-guide/api-front-end-graphql.html"><span>API - Frontend GraphQL</span></a>


</nav>
</nav></div></div><div class="col-md-9"><div class="module" style data-id="ff9403b3-cd1c-4602-bda8-8f3432dc4299" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h1 class="text-center mb-5">Developer Guide
<a class="anchor" id="developer-guide"></a>
</>
</div><div class="module" style data-id="a7d5c8cc-474d-4455-99d3-5266ddc76ea1" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>Before diving into the developer guide, please make sure you have gone thru the Overview and User Guide sections.&nbsp;</p><p>Assuming you have done that, the developer guide will focus on the various methodologies for extending the SonicJs core including theming, module development, overriding core functions, advanced configuration, integration, etc.</p>
</div><div class="module" style data-id="c72f8dc2-5d60-4017-b757-fae434dcfa0d" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h1 class="text-center mb-5 mt-6">Hooks
<a class="anchor" id="hooks"></a>
</>
</div><div class="module" style data-id="dfdeb3e5-d3a9-48fc-8077-aa83c1dd76bf" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>Hooks are what gives SonicJs it's flexibility. &nbsp;It can be a bit confusing at first if you haven't worked with the event-emitter design pattern. However, once you get used to it, you'll see how well it enables us to follow the <a href="https://en.wikipedia.org/wiki/SOLID">SOLID principals</a>.&nbsp;</p><p>Hooks allow us to alter core functionality and even the functionality defined in other modules without touching the code within the target function.</p><p>Let's look at a simple example NOT using hooks:</p>
</div><div class="module" style data-id="45ac156f-6efd-4ca4-85df-d2e111965c96" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">// Get an array of objects of a certain content type,
// and optionally pass in a filter to fine tune the results
function getDataForMyModule(contentType, filter){
  let data &#x3D; getDataFromDatabase(contentType, filter);
  return;
}
// Example call to the above function
// We want all records of type &quot;blog&quot;
let data &#x3D; getDataForMyModule(&quot;blog&quot;, {});</code></pre></div><div class="module" style data-id="45dbb9fb-3a6a-4fe7-b770-70f0c7f04f8f" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>Simple enough right? We want a list of content types of a certain kind ("blog" in our example).&nbsp;</p><p>But what if we wanted to implement a site-wide rule dictating that we never wanted to display a blog post with a future publish date. This will allow us to load up our website with future blog post that will automatically publish once their publish date has been reached.</p>
</div><div class="module" style data-id="77d95783-465e-409a-93e5-a17e7c1e3fee" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">// Here, we had added our new business rule directly in the function.
function getDataForMyModule(contentType, filter){
  filter.publishDate &lt; new Date(); // &lt;--here is the new filter we&#x27;re adding
  let data &#x3D; getDataFromDatabase(contentType, filter);
  return;
}</code></pre></div><div class="module" style data-id="c35d277c-736d-45ad-a94b-09f5ae8114cf" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>But there is a MUCH better way of adding this new business rule. Take a look at a different approach:</p>
</div><div class="module" style data-id="f0305e48-d6f7-4c33-a9e1-7ffe3fbc0d58" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">// Get an array of objects of a certain content type,
// and optionally pass in a filter to fine tune the results
function getDataForMyModule(contentType, filter){
  eventBusService.emit(&quot;preDataFetch&quot;, filter);
  let data &#x3D; getDataFromDatabase(contentType, filter);
  return;
}
// Before calling the above function, we&#x27;ll setup our business rule
eventBusService.on(&#x27;preDataFetch&#x27;, function (filter) {
 filter.publishDate &lt; new Date();
});
// Example call to the above function
// We want all records of type &quot;blog&quot;
let data &#x3D; getDataForMyModule(&quot;blog&quot;, {});</code></pre></div><div class="module" style data-id="fa8fa437-6803-408b-a738-36428a38dfc6" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>So we're doing the same thing as before, but we've &nbsp;broken away from the need to ever again have modify our core getDataForMyModule() function.</p><p>We can now very easily implement the "S" and "O" in SOLID - Each time we want to implement a business rule in our getDataForMyModule(), we can simply "subscribe" to the "emitter event" and inject our new code.</p>
</div><div class="module" style data-id="b50f2d6e-6d95-4ee1-9d70-44e67fd35dc6" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h2 class="text-center mb-5 mt-6">Hook List
<a class="anchor" id="hook-list"></a>
</>
</div><div class="module" style data-id="8c1d0fa4-f330-40ae-a051-b96fd1f81faf" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>Below is a list of the core system hooks that can be overwritten in your module development. You can also define your own hooks in custom modules. If you find yourself needing a hook in the core system that doesn't exist, please don't hesitate to raise an issue on <a href="https://github.com/lane711/sonicjs/issues">Github Issues</a>.</p><p><strong>Async</strong></p><p>Emitters can be subscribed to both sync and async depending on your use case. In most cases you will want to use await, unless you are not concerned about other code running in parallel. A good example might be tracing or analytics. If unsure, its best to use await.</p><p><strong>Don't be overwhelmed</strong></p><p>Don't be overwhelmed by the large list of Hooks. Most of them are in place to support the inner workings of the CMS. For the vast majority of custom module development tasks, you only need to work with a handful of them.</p>
</div><div class="module" style data-id="222be75b-7910-4e47-9bad-3d4f551511fc" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><ul><li>High Level<ul><li>startup</li><li>started</li></ul></li><li>Events<ul><li>postBegin</li><li>requestBegin</li><li>afterFormSubmit</li><li>firstPageLoaded</li></ul></li><li>Page Generation<ul><li>getRenderedPagePostDataFetch</li><li>preRender</li><li>preRenderTemplate</li><li>getRenderedPagePostDataFetch</li><li>preProcessSections</li><li>preProcessRows</li><li>preProcessColumns</li><li>postPageDataFetch</li><li>postPageRender</li><li>postProcessPage</li></ul></li><li>Content<ul><li>contentUpdated</li><li>contentCreated</li><li>contentCreatedOrUpdated</li></ul></li><li>ShortCodes<ul><li>preProcessModuleShortCode</li><li>beginProcessModuleShortCode</li><li>beginProcessModuleShortCodeDelayed</li></ul></li><li>Urls<ul><li>processUrl</li><li>preProcessPageUrlLookup</li></ul></li><li>Modules<ul><li>modulesLoaded</li><li>postModuleGetData</li><li>postProcessModuleShortCodeProccessedHtml</li></ul></li><li>Admin<ul><li>postAdminPageRender</li><li>&nbsp;</li></ul></li></ul>
</div><div class="module" style data-id="8baa2241-e89b-47d2-b655-22c5c89d735a" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>If you want to see SonicJs hooks in the source code simply do a full text search (CMD-SHIFT-F in VS Code) and search for "emitterService.emit(". This will allow you to see where the hooks are defined in the core source code.</p>
</div><div class="module" style data-id="08e6e6f2-2227-4262-a9d7-f76cafeaf343" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h2 class="text-center mt-5">Using Hooks
<a class="anchor" id="using-hooks"></a>
</>
</div><div class="module" style data-id="6b926ed9-32c4-4117-b7d4-cb55738fa14d" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>To use a hook, we add it to the startup function of a module's service. The example below is from the alert module located here:<br>[sonicjs root]/server/modules/alert/services/alert-main-service.js</p>
</div><div class="module" style data-id="2406f77d-33ff-4877-b1a1-e217cd16fe0d" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">var dataService &#x3D; require(&#x27;../../../services/data.service&#x27;);
var emitterService &#x3D; require(&#x27;../../../services/emitter.service&#x27;);
var globalService &#x3D; require(&#x27;../../../services/global.service&#x27;);

module.exports &#x3D; alertMainService &#x3D; {
    startup: async function () {
        emitterService.on(&#x27;beginProcessModuleShortCode&#x27;, async function (options) {
            if (options.shortcode.name &#x3D;&#x3D;&#x3D; &#x27;ALERT&#x27;) {
                options.moduleName &#x3D; &#x27;alert&#x27;;
                await moduleService.processModuleInColumn(options);
            }
        });
    },
}</code></pre></div><div class="module" style data-id="778d4dc0-0ad1-48d6-b85c-0bd7f59305ed" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>In the above example, we are subscribing to the beginProcessModuleShortCode hook which is described in more details below.</p>
</div><div class="module" style data-id="7448d30c-8b52-4797-9b14-4d29747cfee8" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h2 class="text-center mt-5">Common Hooks
<a class="anchor" id="common-hooks"></a>
</>
</div><div class="module" style data-id="40d9994e-30f7-4491-88c1-550692de0929" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>Below are the common hooks that you may need to use for module development.</p>
</div><div class="module" style data-id="a39d4fe7-0efe-46b9-a63a-c6638bf78ab9" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h3 class="text-left mt-5">startup
<a class="anchor" id="startup"></a>
</>
</div><div class="module" style data-id="bd1c86c8-f488-4e3f-b243-763278afea24" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>Emitted when the system's services are loaded. This is the first hook called when the system is starting up. In the below example, the module service uses this hook to know when it should start to load the modules. It is rare that a non-core developer would need to use this hook, however we included it in the common list since its the first hook.</p>
</div><div class="module" style data-id="67ffe976-0850-4ae7-ad4e-a3bc7f1a6921" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">    emitterService.on(&quot;startup&quot;, async function ({app}) {
      await moduleService.processModules(app);
    });</code></pre></div><div class="module" style data-id="b39e731d-689a-4fbc-acfa-54ed37db2aaf" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h3 class="text-left mt-5">beginProcessModuleShortCode
<a class="anchor" id="beginprocessmoduleshortcode"></a>
</>
</div><div class="module" style data-id="e7d15ea0-7ea4-47aa-86c7-38b44e78b198" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>Emitted when the SonicJs core engine is processing shortcodes. This is the most common hook used in SonicJs for module development.</p>
</div><div class="module" style data-id="b787b3b4-3146-4be9-bd74-eacd9f324a9f" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">        emitterService.on(&#x27;beginProcessModuleShortCode&#x27;, async function (options) {
            if (options.shortcode.name &#x3D;&#x3D;&#x3D; &#x27;ALERT&#x27;) {
                options.moduleName &#x3D; &#x27;alert&#x27;;
                await moduleService.processModuleInColumn(options);
            }
        });</code></pre></div><div class="module" style data-id="592a1d97-9869-4f28-897e-e1f2646130f1" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true">
</div><div class="module" style data-id="3811ca6b-54c2-451f-a462-1cffa997d3c8" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h3 class="text-left mt-5">postModuleGetData
<a class="anchor" id="postmodulegetdata"></a>
</>
</div><div class="module" style data-id="273a3a8b-6a17-4f64-a904-2460ba8e55f6" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>Anytime you want to pull in additional data, you will use the postModuleGetData hook. The blog module is a good example of this as we want to pull in a list of blog posts and display them in our view. Here is an example:</p>
</div><div class="module" style data-id="7652c656-86ce-4ff7-b015-e6e40a2b7256" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">    emitterService.on(&quot;postModuleGetData&quot;, async function (options) {
      if (options.shortcode.name &#x3D;&#x3D;&#x3D; &quot;BLOG&quot;) {
        await blogMainService.getBlogData(options);
      }
    });</code></pre></div><div class="module" style data-id="2a544c24-eb3b-494f-995a-c93ad9a3eaa4" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>So after (hence to prefix of "post") we get a default data for the module, which includes anything that we entered in the settings form when we first drag and dropped the module onto a page, we then want to get a list of blog posts. For reference the getBlogData(options) function get's a list of blog posts - it gets all of them by default or just the one's with a certain tag if the user is on a tag listing page. You can also review the entire blog module service here: server/modules/blog/services/blog-main-service.js</p>
</div><div class="module" style data-id="fe7bfa91-3991-4510-980a-4415e4628dca" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h3 class="text-left mt-5">addUrl
<a class="anchor" id="addurl"></a>
</>
</div><div class="module" style data-id="0445f4fa-0baf-449d-9ad4-586201100d10" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>This hook allows us to programmatically add urls that can be rendered by the CMS. This could be regular pages, blog posts, taxonomy pages (like for showing content with a certain tag) or any custom content type that you create. The below example is again from the blog module:</p>
</div><div class="module" style data-id="0e94ec5b-ca56-4d53-bf23-aec04cf0f536" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">    emitterService.on(&quot;addUrls&quot;, async function (options) {
      var blogs &#x3D; await dalService.contentGet(
        null,
        &quot;blog&quot;,
        null,
        null,
        null,
        null,
        null,
        null,
        true
      );
      blogs &#x3D; blogs.sort((a, b) &#x3D;&gt; (a.createdOn &gt; b.createdOn ? 1 : -1));

      for (let index &#x3D; 0; index &lt; blogs.length; index++) {
        const blogPrevious &#x3D; index &gt; 0 ? blogs[index -1] : {};
        const blog &#x3D; blogs[index];
        const blogNext &#x3D; index &lt; (blogs.length -1) ? blogs[index +1] : {};
        urlService.addUrl(blog.url, &quot;blogHandler&quot;, &quot;exact&quot;, blogData.title, blog.id, blogPrevious?.url, blogNext.url);
      }
    });
  },</code></pre></div><div class="module" style data-id="321e9bad-7bf2-4426-b9a6-bc47874e2a49" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h3 class="text-left mt-6">processUrl
<a class="anchor" id="processurl"></a>
</>
</div><div class="module" style data-id="42145507-7ba7-4957-b09f-1661cdc5e69f" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>This hook allows us to listen for incoming urls and respond accordingly. In the below example, the blog details module waits to process the Urls previously setup via the addUrl hook:</p>
</div><div class="module" style data-id="3437101f-8dee-4792-bbdb-0420214fef13" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">    emitterService.on(&quot;processUrl&quot;, async function (options) {
      if (options.urlKey?.handler &#x3D;&#x3D;&#x3D; &quot;blogHandler&quot;) {
        const blogPost &#x3D; await dataService.getContentByUrl(options.urlKey.url);

        let blogDetailsUrl &#x3D; &quot;/blog-details&quot;;
        options.req.url &#x3D; blogDetailsUrl;
        var { page: pageData } &#x3D; await contentService.getRenderedPage(
          options.req
        );
        options.page &#x3D; pageData;

        //overrides
        options.page.data.heroTitle &#x3D; blogPost.data.title;

        return;
      }
    });</code></pre></div><div class="module" style data-id="1335b494-fc23-4709-a8a8-faab458ee53d" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>In the above code, we're telling the CMS that anytime you process a url that is supposed to be handled by the blogHandler, use the page that can be found at the /blog-details url. This means that we have the option of managing our blog details page for our blog with a regular CMS page, so we get all the benefits of being able to manage it with the drag and drop visual page editor. We can also use a page template in this case.</p>
</div><div class="module" style data-id="c6843784-79dd-44e7-964a-787070f3f362" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h3 class="text-left mt-5">contentCreatedOrUpdated
<a class="anchor" id="contentcreatedorupdated"></a>
</>
</div><div class="module" style data-id="6f59a700-2afe-4229-9423-cb3e1f2b4a3c" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>This hook will be executed anytime content is created or updated. For example, anytime we add or update a page on our site, we want to make sure that the CMS knows about the new or updated url for that page. The below sample is from the page module:</p>
</div><div class="module" style data-id="d1fdd60a-ee8d-47ac-80e4-9f7a531c4d16" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">    emitterService.on(&quot;contentCreatedOrUpdated&quot;, async function (options) {
      if (options.contentTypeId &#x3D;&#x3D;&#x3D; &quot;page&quot;) {
        const pageData &#x3D; JSON.parse(options.data);
        urlService.addUrl(pageData.url, &quot;pageHandler&quot;, &quot;exact&quot;, pageData.title, options.id);
      }
    });</code></pre></div><div class="module" style data-id="9e259950-5da9-4815-893c-ea2e69bc89b2" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h3 class="text-left mt-6">afterFormSubmit
<a class="anchor" id="afterformsubmit"></a>
</>
</div><div class="module" style data-id="e2e99f3e-4f5a-4845-b76c-f779e55ada23" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>This hook allows us to process data submitted thru user-facing forms such as a newsletter signup or a contact form. The below is a simplified version of the newsletter signup:</p>
</div><div class="module" style data-id="a0c8ed63-f01d-4f13-bc2f-bf5e800a9895" data-module="CODE-SNIPPET" data-content-type="code-snippet" data-template-region="true" data-template-page="true"><pre class><code class="language-javascript">    emitterService.on(&quot;afterFormSubmit&quot;, async function (options) {
      if (options.data.contentType !&#x3D;&#x3D; &quot;newsletter&quot;) {
        return;
      }

      let encryptedEmail &#x3D; cryptoService.encrypt(options.email);

      let payload &#x3D; {
        data: {
          contentType: options.contentType,
          email: encryptedEmail,
        },
      };

      // save the form
      await dataService.contentCreate(payload);
    });</code></pre></div><div class="module" style data-id="ca857249-14dc-485a-97f5-db73f778cf7b" data-module="TITLE" data-content-type="title" data-template-region="true" data-template-page="true"><h3 class="text-left mt-6">More Hooks?
<a class="anchor" id="more-hooks"></a>
</>
</div><div class="module" style data-id="ae08fba1-68cd-4819-b1da-27bf95331a54" data-module="HTML" data-content-type="html" data-template-region="true" data-template-page="true"><p>As mentioned above, there are quite a few additional hooks, but they are currently used only internally by the CMS.&nbsp;</p><p>Working with hooks takes a bit of practice, but once you get used to them, you'll see just how powerful and time-saving working with SonicJs can be.</p>
</div></div></div></div></div></section>
</main>

<footer class="text-center text-lg-start bg-dark text-light footer">



<section class="copyright text-center p-4 mt-5">
© 2023 SonicJs. All Rights Reserved
</section>

</footer>

<script src="../assets/js/combined-0.7.6.js" type="b9be5b5bd56675c7cf7d23c4-text/javascript"></script><script src="../page-builder/js/page-builder.js" type="b9be5b5bd56675c7cf7d23c4-text/javascript"></script>
<script type="b9be5b5bd56675c7cf7d23c4-text/javascript">
            AOS.init();
        </script>
<script type="b9be5b5bd56675c7cf7d23c4-module" src="../server/themes/front-end/kevant/js/charts.js"></script>
<script src="../cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="b9be5b5bd56675c7cf7d23c4-|49" defer></script></body>
</html>